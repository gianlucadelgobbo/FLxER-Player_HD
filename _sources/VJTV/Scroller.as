package VJTV {	import FLxER.main.Rett;	import flash.display.Sprite;	import flash.text.TextField;	import flash.events.*;	import flash.geom.Rectangle;	public class Scroller extends Sprite {		var myMask, myScrolled;		var path:Rett;		var slider:Rett;		var h		function Scroller(m, s) {			myMask= m			myScrolled = s;			y = myMask.y			x = myMask.x + myMask.width + 10;			path = new Rett(0, 0, 10, myMask.height, 0xCCCCCC, -1, 1);			this.addChild(path);			slider = new Rett(0, 0, 10, int(myMask.height/4), 0xFF7F00, -1, 1);			this.addChild(slider);			//avvia(m, s);		}		public function myDisable():void {			//slider.removeEventListener(MouseEvent.MOUSE_OVER,mouseOverHandler);			//slider.removeEventListener(MouseEvent.MOUSE_OUT,mouseOutHandler);			slider.removeEventListener(MouseEvent.MOUSE_DOWN,mouseDownHandler);			//slider.removeEventListener(MouseEvent.MOUSE_UP,mouseUpHandler);			slider.buttonMode = false;			slider.alpha = .6;			slider.height = int(myMask.height/4);		}		public function myEnable():void {			//mouseOutHandler(null)			//slider.addEventListener(MouseEvent.MOUSE_OVER,mouseOverHandler);			//slider.addEventListener(MouseEvent.MOUSE_OUT,mouseOutHandler);			slider.addEventListener(MouseEvent.MOUSE_DOWN,mouseDownHandler);			//slider.addEventListener(MouseEvent.MOUSE_UP,mouseUpHandler);			slider.buttonMode = true;			slider.alpha = 1;		}		function mouseDownHandler(e:Event) {			slider.startDrag(false, new Rectangle(0, 0, 0, path.height-slider.height));			//c = setInterval(scrolla, 30);			stage.addEventListener(MouseEvent.MOUSE_UP,mouseUpHandler);			stage.addEventListener(MouseEvent.MOUSE_MOVE,scrolla);		};		function mouseUpHandler(e:Event) {			stage.removeEventListener(MouseEvent.MOUSE_UP,mouseUpHandler);			stage.removeEventListener(MouseEvent.MOUSE_MOVE,scrolla);			//clearInterval(c);			slider.stopDrag();		};		function scrolla(e:Event) {			if (myScrolled is TextField) {				myScrolled.scroll = int(int(100*(slider.y)/(path.height-slider.height))/(100/(myScrolled.maxscroll+5)));			} else {				myScrolled.y = -int(slider.y*(((myScrolled.height+10)-path.height)/(path.height-slider.height)))+myMask.y;			}		}		function avvia(m, s) {			myMask= m			myScrolled = s;			path.height = myMask.height			if (myScrolled is TextField) {				if (path.height<myScrolled.textHeight) {					slider.visible = true;					path.visible = true;					slider.height = (myScrolled.height)/(myScrolled.textHeight/myScrolled.height);					myEnable()				} else {					myDisable()				}			} else {				if (path.height<myScrolled.height) {					slider.visible = true;					path.visible = true;					slider.height = path.height/(myScrolled.height/path.height);					myEnable()				} else {					myDisable()				}			}			if (slider.height<10) {				slider.height = 10;			}		}	}}